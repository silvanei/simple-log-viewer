<div class="wraper" role="table" aria-label="Log entries showing datetime, channel, level, and message">
    <div class="row" role="row">
        <div class="cell cell-header" role="columnheader" scope="col">&nbsp</div>
        <div class="cell cell-header" role="columnheader" scope="col"><b>Datetime</b></div>
        <div class="cell cell-header" role="columnheader" scope="col"><b>Channel</b></div>
        <div class="cell cell-header" role="columnheader" scope="col"><b>Level</b></div>
        <div class="cell cell-header" role="columnheader" scope="col"><b>Message</b></div>
        <?php foreach ($this->fields as $field) : ?>
            <div class="cell cell-header" role="columnheader" scope="col">
                <b><?= $this->renderAdidionalKey($field) ?></b>
                <button
                    class="field-toggle-btn"
                    data-field="<?= $this->renderAdidionalKey($field) ?>"
                    onclick="toggleField(event, '<?= $field ?>')"
                    aria-label="Remove column"
                    title="Remove column"
                >
                    <span class="i i-close"></span>
                </button>
            </div>
        <?php endforeach; ?>
    </div>

    <?php foreach ($this->entries as $entry) : ?>
        <?php $flattenWithDotsentry = $this->flattenWithDots((array)$entry); ?>
        <div class="row row-main" role="row">
            <div class="cell" role="cell">
                <button aria-label="Expand details for log entry" _="on click toggle .collapsed on next .log-content then toggle .rotate-180 on me">
                    <span class="i i-caret"></span>
                </button>
            </div>
            <div class="cell datetime" role="cell"><span><?= $this->escape($entry->datetime) ?></span></div>
            <div class="cell channel" role="cell"><span>[<?= $this->escape($entry->channel) ?>]</span></div>
            <div class="cell level <?= strtolower($entry->level) ?>" role="cell"><span><?= $this->escape($entry->level) ?></span></div>
            <div class="cell message" role="cell"><span><?= $this->escape($entry->message) ?></span></div>
            <?php foreach ($this->fields as $field) : ?>
                <div class="cell cell-field" role="cell">
                    <span><?= $this->renderAdidionalField($flattenWithDotsentry, $field) ?></span>
                </div>
            <?php endforeach; ?>
        </div>
        <div class="row details log-content collapsed" role="row">
            <div class="cell" role="cell" colspan="<?= 5 + count($this->fields) ?>">
                <?= $this->partial('search/partials/item', ['entry' => $flattenWithDotsentry, 'fields' => $this->fields]) ?>
            </div>
        </div>
    <?php endforeach; ?>
</div>
